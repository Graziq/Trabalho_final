name: Trabalho_final
prefect-version: 2.16.4

build:
  - prefect.deployments.steps.set_working_directory:
      directory: /opt/prefect/flows
      create_directory: true
  - prefect.deployments.steps.run_shell_script:
      script: |
        # Instale as dependências que seu flow "resultados2.py" precisa.
        # Por exemplo, se usa pandas, sqlalchemy e psycopg2-binary:
        pip install pandas sqlalchemy psycopg2-binary
        echo "Preparação do ambiente do flow concluída."

deployments:
  - name: simulacao-contingencia-ieee30 # Nome do deploy, conforme o nome do seu flow
    version: '1.0'
    tags: []
    description: 'FLOW: Orquestra a simulacao de contingencias N-1 na rede IEEE 30 barras'
    entrypoint: src/flows/resultados2.py:simulacao_contingencia_flow # Caminho para o arquivo e nome da função do flow
    flow_name: simulacao-contingencia-ieee30 # Deve ser o mesmo nome do @flow decorator
    parameters: {} # Se quiser definir valores padrão ou permitir que sejam passados no deploy
    work_pool:
      name: default-agent-pool
      work_queue_name: default
      job_variables:
        image: prefecthq/prefect:2-python3.10 # Imagem base para o contêiner de execução do flow
        env:
          PREFECT_API_URL: http://prefect-server:4200/api # Prefect Server dentro da rede Docker
          DATABASE_HOST: postgres # PostgreSQL dentro da rede Docker
          DATABASE_PORT: 5432
          DATABASE_USER: prefect
          DATABASE_PASSWORD: prefect
          DATABASE_DBNAME: prefect